{% extends "../base.html" %}
{% load staticfiles %}


{% block head_title %}
    <title>User Settings</title>

    <link href="{% static "vendor/font-awesome-4.7/css/font-awesome.min.css" %}" rel="stylesheet" media="all">
		<link href="{% static "vendor/font-awesome-5/css/fontawesome-all.min.css" %}" rel="stylesheet" media="all">

		<!-- Bootstrap CSS -->
		<link href="{% static "vendor/bootstrap-4.1/bootstrap.min.css"%}" rel="stylesheet" media="all">
		<!-- Selectpicker -->
		<link href="{% static "vendor/bootstrap-select-1.13.9/css/bootstrap-select.min.css" %}" rel="stylesheet" media="all">
		<link href="{% static "vendor/timepicker/1.3.5/jquery.timepicker.min.css" %}" rel="stylesheet" media="all">

		<!-- Main CSS-->
		<link href="{% static "css/main.css" %}" rel="stylesheet" media="all">
		<link href="{% static "css/signup-login.css" %}" rel="stylesheet" type="text/css">


		<!-- Jquery JS -->
		<script src="{% static "vendor/jquery-3.2.1.min.js" %}"></script>
		<script src="{% static "vendor/bootstrap-select-1.13.9/popper.js" %}"></script>

		<!-- Selectpicker -->]
		<script src="{% static "vendor/timepicker/1.3.5/jquery.timepicker.min.js" %}"></script>

{% endblock %}

{% block body_block %}
          <div id="settingsCard" class="au-card">
            <!-- PROFILE IMAGE FORM -->
            <form method="post" enctype="multipart/form-data">
                <div class="row- m-t-25">
                    <div class="col-md-12">
                        <h2 class="title-1">Update Profile Image</h2>
                    </div>
                </div>
                <div class="row- m-t-25">
                    <div class="col-md-2">
                        <div class="image">
                                <img width="80" src="{% static image_path %}" alt="Profile Image" />
                                {% csrf_token %}
                        </div>
                    </div>

                    <div class="col-md-8">
                      <label for="uploadImage" class="m-t-10">Upload a new profile image</label>
                      <input type="file" name="profile_image" class="form-control-file" id="uploadImage" accept="image/*">
                    </div>
                </div>
                <div class="row- m-t-25">
                    <div class="col-md-12">
                    <button type="submit" class="btn btn-primary">Update Image</button>
                    </div>
                </div>
            </form>
            <!-- END PROFILE IMAGE FORM -->
            <br>

            <!-- NAME FORM -->
            <form id="change_name_form" action="{% url "admin:admin_settings:settings_update_name" id=user.id %}" method="post">
            {% csrf_token %}
                <div class="row- m-t-25">
                    <div class="col-md-12">
                        <h2 class="title-1">Change Name</h2>
                    </div>
                </div>
                <div class="row- m-t-25">
                    <div class="form-group col-md-9">
                        <label for="newEmail" >New First Name</label>
                        <input type="text" name="newFirstName" class="form-control" id="newFirstName" placeholder="New First Name" value="{{user.first_name}}">
                    </div>
                    <div class="form-group col-md-9">
                        <label for="newLastName" >New Last Name</label>
                        <input type="text" name="newLastName" class="form-control" id="newLastName" placeholder="New Last Name" value="{{user.last_name}}">
                    </div>
                </div>
                <div class="row- m-t-25">
                    <div class="col-md-12">
                        <button type="submit" class="btn btn-primary">Update Name</button>
                    </div>
                </div>
            </form >
            <!-- END NAME FORM -->
            <br>

            <!-- EMAIL FORM -->
            <form id="change_email_form" action="{% url "admin:admin_settings:settings_update_email" id=user.id %}" method="post">
            {% csrf_token %}
                <div class="row- m-t-25">
                    <div class="col-md-12">
                        <h2 class="title-1">Change Email Address</h2>
                    </div>
                </div>
                <div class="row- m-t-25">
                    <div class="form-group col-md-9">
                        <label for="newEmail" >New Email</label>
                        <input type="text" name="newEmail" class="form-control" id="newEmail" placeholder="New Email Address"  value="{{user.email}}">
                    </div>
                </div>
                <div class="row- m-t-25">
                    <div class="col-md-12">
                        <button type="submit" class="btn btn-primary">Change Email</button>
                    </div>
                </div>
            </form >
            <!-- END EMAIL FORM -->
            <br>


            <!-- PASSWORD FORM -->
            <form id="change_password_form" action="{% url "admin:admin_settings:settings_update_password" id=user.id %}" method="post">
            {% csrf_token %}
                <div class="row- m-t-25">
                    <div class="col-md-12">
                        <h2 class="title-1">Change Password</h2>
                    </div>
                </div>
                <div class="row- m-t-25">
                    <label for="oldPass" class="col-md-4 col-form-label">Current Password</label>
                    <div class="col-md-4">
                        <input type="password" name="currentPass" class="form-control" id="currentPass">
                    </div>
                </div>
                <div class="row- m-t-25">
                    <label for="newPass" class="col-md-4 col-form-label">New Password</label>
                    <div class="col-md-4">
                        <input type="password" name="newPass" class="form-control" id="newPass">
                    </div>
                </div>
                <div class="row- m-t-25">
                    <label for="newPassConfirm" class="col-md-4 col-form-label">Confirm New Password</label>
                    <div class="col-md-4">
                        <input type="password" name="confirmNewPass" class="form-control" id="newPassConfirm">
                    </div>
                </div>
                <div class="row- m-t-25">
                    <div class="col-md-12">
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                </div>
            </form>
            <!-- END PASSWORD FORM -->
            <br>


            <!-- ADMINS TABLE -->
            <div class="row- m-t-25">
                <div class="col-md-12">
                    <div class="overview-wrap">
                        <div class="col-md-6">
                            <h2 class="title-1">Admins</h2>
                        </div>
                        <div class="col-md-6">
                            <div class="dropdown">
                                <input value="Add New Admin" type="button" id="addNewAdmin" class="pull-right btn btn-primary"><span style="color:white;"></span></input>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            <div class="row m-t-25">
                <div class="col-lg-12">
                    <div class="table-responsive table--no-card m-b-40">
                        <table class="table table-borderless table-striped table-earning" align="center">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Role</th>
                                </tr>
                            </thead>
                            <tbody>
                              {%for admin in admins%}
                                <tr>
                                    <td>{{admin.first_name|add:" "|add:admin.last_name}}</td>
                                    <td>{{admin.email}}</td>
                                    <td>{{admin.admin_object.role}}</td>                                    
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
              </div>

            <!-- END ADMINS TABLE -->
          </div>

          <div id="addAdminCard" class="au-card" style="display: none;">
            <!-- NEW ADMIN FORM -->
            <form id="new_admin_form" action="{% url "admin:admin_settings:settings_add_admins" id=user.id %}" method="post">
            {% csrf_token %}
                <div class="row-">
                    <div class="col-md-12">
                        <h2 class="title-1">Create New Admin</h2>
                    </div>
                </div>
                <div class="row- m-t-25">
                    <div class="form-group col-md-4">
                        <label for="new_admin_first_name">First Name</label>
                        <input type="text"  name="new_admin_first_name" class="form-control" id="new_admin_first_name">
                    </div>
                    <div class="form-group col-md-4">
                        <label for="new_admin_last_name" >Last Name</label>
                        <input type="text" name="new_admin_last_name" class="form-control" id="new_admin_last_name">
                    </div>
                    <div class="form-group col-md-4">
                        <label for="new_admin_email" >Email</label>
                        <input type="text" name="new_admin_email" class="form-control" id="new_admin_email">
                    </div>
                    <div class="form-group col-md-4">
                        <label for="new_admin_phone">Phone Number</label>
                        <input type="text" name="new_admin_phone" class="form-control" id="new_admin_phone" pattern="\/.*\S.*\/|1?[\s-]?\.?\(?(\d{3})\)?\.?[\s-]?\d{3}[\s-]?\.?\d{4}" title="Enter your phone number">
                    </div>
                    <div class="form-group col-md-4">
                      <label for="new_admin_role" >Role</label>
                      <select class="selectpicker form-control" name="admin_role">
                        <option value="ADMIN">Admin</option>
                        <option value="SUPER">Super Admin</option>
                        <option value="MNGR">Manager</option>
                        <option value="DEV">Devolper</option>
                        <option value="STAFF">Staff</option>
                      </select>
                    </div>
                </div>
                <div class="row- m-t-25">
                    <div class="col-md-12">
                        <input type="button" id="admin-new-back" class="btn btn-danger" value="Back">
                        <button type="submit" class="btn btn-primary id="newAdminSubmit"">Submit</button>
                    </div>
                </div>
            </form >
            <!-- END NAME FORM -->
          </div>


<script>

  $("#addNewAdmin").on('click', function(e) {
    $("#settingsCard").hide("fast");
    $("#addAdminCard").show("fast");
  });

  $("#admin-new-back").on('click', function(e) {
    $("#addAdminCard").hide("fast");
    $("#settingsCard").show("fast");
  });

    $("#newAdminSubmit").on('click', function(e) {
        $("#addAdminCard").hide("fast");
    $("#settingsCard").show("fast");
  });

</script>



{% endblock %}



<!-- end document-->
